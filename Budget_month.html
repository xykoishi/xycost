<!DOCTYPE html>
<html>
<title>月预算</title>

<head>
  <meta charset="utf-8">
  <title>月预算</title>
  <!-- 引入 echarts.js -->
  <script src="echarts.min.js"></script>
</head>

<body>
  <!-- 为ECharts准备一个具备大小（宽高）的Dom -->
  <div id="main" style="width: 900px;height: 1000px;margin: auto;position: absolute;top: 0;left: 0;right: 0;bottom: 0;">
  </div>
  
  <script type="text/javascript">
    //=== 预算使用率(手动更改)
    var b1 = 0;
    var b2 = 0;
    var b3 = 0;
    var b4 = 0;
    var b5 = 0;
    var b6 = 0;
 
    //==== 计算天数
    var date = new Date();           //当前日期
    var year = date.getFullYear();   //当前年
    var month = date.getMonth() + 1; //当前月
    var day = date.getDate();        //当前日
    //--- 当月总天数
    if (month == 1 || month == 3 || month == 5 || month == 7 || month == 8 || month == 10 || month == 12) {
      dayOnmonth = 31;
    }
    else if (month == 4 || month == 6 || month == 9 || month == 11) {
      dayOnmonth = 30;
    }
    else { dayOnmonth = 28; }  //手动改，平年28，闰年29
    //--- 竖线位置
    daysRatio = day / dayOnmonth;

    // 基于准备好的dom，初始化echarts实例
    var myChart = echarts.init(document.getElementById('main'));
    // 指定图表的配置项和数据
    var option = {
      animation: false,
      title: { show: false, text: daysRatio },
      grid: {
        left: '3%',
        right: '4%',
        bottom: '3%',
        containLabel: true
      },
      
      yAxis: {
        type: 'category',
        axisTick: { show: false },
        splitLine: { show: false },
        axisLine: { show: false },
        axisLabel: {
          fontSize: 110,
          fontWeight: 'bolder',
          color: '#000000',
        },
        data: ['🐼', '📖', '🍻', '👔', '💊', '🛒']
      },

      xAxis: {
        type: 'value',
        show: false,
        max: 1
      },

      series: [
        {
          data: [b6, b5, b4, b3, b2, b1],
          itemStyle: {
            color: '#134886'
          },
          markLine: {
            symbol: 'none', //去掉箭头
            data: [{ xAxis: daysRatio }],
            label: { formatter: '' }, //去掉数字
            itemStyle: {
              normal: {
                color: '#fdf055',
                lineStyle: {
                  type: 'solid',
                  width: 9
                }
              }
            }
          },
          type: 'bar',
          label: {
            show: true,
            fontSize: 70,
            position: 'insideRight',
            formatter: function (params) {
              if (params.value <= 0.1) {  //小于0.1时不显示
                return ''
              } else {
                return params.value.toFixed(1)   //.toFixed(1) 显示1位小数
              }
            }
          },
          showBackground: true,
          backgroundStyle: {
            color: '#c0bfc0'
          }
        }
      ]
    };

    // 使用刚指定的配置项和数据显示图表。
    myChart.setOption(option);
  </script>
</body>

</html>